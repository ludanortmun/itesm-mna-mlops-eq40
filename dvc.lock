schema: '2.0'
stages:
  load_data:
    cmd: python mlops/load_data.py data/raw/heart_failure_clinical_records_dataset.csv
      data/processed/train_test_data.csv
    deps:
    - path: data/raw/heart_failure_clinical_records_dataset.csv
      hash: md5
      md5: c14aca77ab34e0727acebbde7a0e8ac1
      size: 12539
    - path: mlops/load_data.py
      hash: md5
      md5: aaaf472cb9aa77b7bc82926bad85bcf6
      size: 265
    outs:
    - path: data/processed/train_test_data.csv
      hash: md5
      md5: e8adddac5add6b339ebdf6ca62f634fa
      size: 13793
  preprocess:
    cmd: python mlops/preprocess.py data/processed/train_test_data.csv data/processed/X_train.csv
      data/processed/X_test.csv data/processed/y_train.csv data/processed/y_test.csv
    deps:
    - path: data/processed/train_test_data.csv
      hash: md5
      md5: e8adddac5add6b339ebdf6ca62f634fa
      size: 13793
    - path: mlops/preprocess.py
      hash: md5
      md5: bdddb92aad47f2943d74217799dfee71
      size: 1502
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
  train:
    cmd: python mlops/train_rf.py data/processed/X_train.csv data/processed/y_train.csv
      models/model_rf.pkl
    deps:
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
    - path: mlops/train_rf.py
      hash: md5
      md5: 61ace1eb69ca306a241436c77c9635dc
      size: 1046
    outs:
    - path: models/model_rf.pkl
      hash: md5
      md5: 03fe407722cc5c42a59b6f1e801c937c
      size: 1092745
  evaluate:
    cmd: python mlops/evaluate.py models/model_rf.pkl data/processed/X_test.csv data/processed/y_test.csv
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: mlops/evaluate.py
      hash: md5
      md5: 8438749274f22332446b03da350a0a02
      size: 627
    - path: models/model_rf.pkl
      hash: md5
      md5: 03fe407722cc5c42a59b6f1e801c937c
      size: 1092745
  run_experiment_rf_cv:
    cmd: python mlops/model_tracking/run_experiment.py --model_type random_forest
      --x_train_path data/processed/X_train.csv --y_train_path data/processed/y_train.csv
      --x_test_path data/processed/X_test.csv --y_test_path data/processed/y_test.csv
      --params_path params/random_forest_cv.yaml --model_path models/model_rf_cv.pkl
      --use_cv
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
    - path: mlops/model_tracking
      hash: md5
      md5: 2e016c313b18ae4778bf1fe41737adfc.dir
      size: 7809
      nfiles: 7
    - path: params/random_forest_cv.yaml
      hash: md5
      md5: c874cb8a22f414397f97158866c4244a
      size: 109
    outs:
    - path: models/model_rf_cv.pkl
      hash: md5
      md5: 7d1e55650014e21b4568ed3e3d1fc531
      size: 4
  run_experiment_rf:
    cmd: python mlops/model_tracking/run_experiment.py --model_type random_forest
      --x_train_path data/processed/X_train.csv --y_train_path data/processed/y_train.csv
      --x_test_path data/processed/X_test.csv --y_test_path data/processed/y_test.csv
      --params_path params/random_forest.yaml --model_path models/model_rf.pkl
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
    - path: mlops/model_tracking
      hash: md5
      md5: 2e016c313b18ae4778bf1fe41737adfc.dir
      size: 7809
      nfiles: 7
    - path: params/random_forest.yaml
      hash: md5
      md5: b70a410369fcbf8a6359fa4e92e461c0
      size: 57
    outs:
    - path: models/model_rf.pkl
      hash: md5
      md5: 7d1e55650014e21b4568ed3e3d1fc531
      size: 4
  run_experiment_dt:
    cmd: python mlops/model_tracking/run_experiment.py --model_type decision_tree
      --x_train_path data/processed/X_train.csv --y_train_path data/processed/y_train.csv
      --x_test_path data/processed/X_test.csv --y_test_path data/processed/y_test.csv
      --params_path params/decision_tree.yaml --model_path models/model_dt.pkl
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
    - path: mlops/model_tracking
      hash: md5
      md5: 2e016c313b18ae4778bf1fe41737adfc.dir
      size: 7809
      nfiles: 7
    - path: params/decision_tree.yaml
      hash: md5
      md5: 31a021ddaca817886a02fa506ca8d0fe
      size: 38
    outs:
    - path: models/model_dt.pkl
      hash: md5
      md5: 7d1e55650014e21b4568ed3e3d1fc531
      size: 4
  run_experiment_dt_cv:
    cmd: python mlops/model_tracking/run_experiment.py --model_type decision_tree
      --x_train_path data/processed/X_train.csv --y_train_path data/processed/y_train.csv
      --x_test_path data/processed/X_test.csv --y_test_path data/processed/y_test.csv
      --params_path params/decision_tree_cv.yaml --model_path models/model_dt_cv.pkl
      --use_cv
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 3ba8bcc073bbae08b9b3c80413892328
      size: 10858
    - path: data/processed/X_train.csv
      hash: md5
      md5: be4983ca52c77d5477c59a6cce32b6b0
      size: 43177
    - path: data/processed/y_test.csv
      hash: md5
      md5: 7f54cc134e44081d387bfb6dc9dbc321
      size: 193
    - path: data/processed/y_train.csv
      hash: md5
      md5: 8db873c0929dbfa478a6f9245521c2f0
      size: 730
    - path: mlops/model_tracking
      hash: md5
      md5: 2e016c313b18ae4778bf1fe41737adfc.dir
      size: 7809
      nfiles: 7
    - path: params/decision_tree_cv.yaml
      hash: md5
      md5: c9aed46d8b1963b1deafc9ebcdd56809
      size: 66
    outs:
    - path: models/model_dt_cv.pkl
      hash: md5
      md5: 7d1e55650014e21b4568ed3e3d1fc531
      size: 4
